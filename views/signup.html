<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Регистрация</title>
	{{ links }}
	{{ CSS_PAGE_LINK }}
</head>
	<body>
		<div class="container pt">
			<div class="row">
				<!-- <h1 class="talcenter blue-color">Форма регистрации Mind</h1> -->
				<div class="col-lg-4 col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-6 col-xs-12">
					<div class="plitka">
						<form action="" method="POST" id="register-form">
							<div class="input-group form-group">
								<label class="shadow-label">Придумайте логин: </label><br>
								<input
									type="text"
									name="login"
									placeholder="Введите логин"
									class="form-control-up form-control"
									required
								>
							</div>
							<div class="input-group form-group">
								<label class="shadow-label">Придумайте пароль: </label><br>
								<input
									id="password-input"
									type="password"
									name="password"
									placeholder="Введите пароль (более 6 символов)"
									class="form-control-up form-control"
									required
								>
							</div>
							<div class="input-group form-group">
								<label class="shadow-label">Подтвердите пароль: </label><br>
								<input
									id="password-confirm-input"
									type="password"
									placeholder="Подтвердите пароль"
									class="form-control-up form-control"
									required
								>
								<span style="display: none;" id="passwords-wrong">Пароли не совпадают</span>
							</div>
							<div class="input-group form-group">
								<label class="shadow-label">Ваша фамилия: </label><br>
								<input
									type="text"
									name="sname"
									placeholder="Введите фамилию"
									class="form-control-up form-control"
									required
								>
							</div>
							<div class="input-group form-group">
								<label class="shadow-label">Как Вас зовут: </label><br>
								<input
									type="text"
									name="name"
									placeholder="Введите имя"
									class="form-control-up form-control"
									required
								>
							</div>
							<div class="input-group form-group">
								<label class="shadow-label">Ваше отчество: </label><br>
								<input
									type="text"
									name="fname"
									placeholder="Введите отчество"
									class="form-control-up form-control"
									required
								>
							</div>
							<div class="input-group form-group">
								<label class="shadow-label">Когда у Вас день рождения: </label><br>
								<input
									type="date"
									name="bday"
									class="form-control-up form-control"
									required
								>
							</div>

							<div class="input-group form-group">
								<input type="radio" name="role" class="radio-role" value="teacher" place required>
								<label class="radio-role">Учитель</label>
								<input type="radio" name="role" class="radio-role" value="student" required>
								<label class="radio-role">Ученик</label>
							</div>
							<div id="class-select-div" class="input-group form-group">
								<label>В каком классе Вы учитесь: </label><br>
								<select id="class_select" class="form-control-up form-control" name="class" required></select>
							</div>

							<script>
								(function() {
									const student_list = {{ CLASSES }};

									$("#class-select-div").hide();	
									$(".radio-role").change(function() {	
										let val = $('input[name=role]:checked').val();	
										$("#class-select-div").hide();	
										if (val == "student") {	
											$("#class-select-div").show();	
										} 	
									});	

									student_list.forEach(function(e) {	
										$("#class_select").append(	
											`<option>${e}</option>`	
										)	
									});

									$("#register-form").submit(function() {
										let pass = $("#password-input").val();
										let pass_conf = $("#password-confirm-input").val();

										if (pass !== pass_conf) {
											$("#passwords-wrong").show();
											return false;
										}

										return true;
									});

									$("#password-input, #password-confirm-input").keydown(function() {
										$("#passwords-wrong").hide();									
									});
								})();

							</script>

							<br>
							<script src="/js/select_student.js"></script>
							<input type="submit" id="form-submit"  class="log-in-u" value="Зарегистрироваться">
						</form>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>